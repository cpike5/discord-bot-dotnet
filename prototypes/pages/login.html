<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Discord Bot</title>
  <link rel="stylesheet" href="../css/tokens.css">
  <style>
    /* Global Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-primary);
    }

    /* ============================================
       PAGE-SPECIFIC STYLES
       ============================================ */

    /* Layout Container */
    .auth-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: var(--space-4);
      background: linear-gradient(135deg, var(--surface-primary) 0%, var(--color-neutral-800) 100%);
    }

    /* Card Component */
    .auth-card {
      background: var(--card-bg);
      border-radius: var(--card-radius);
      box-shadow: var(--shadow-xl);
      padding: var(--space-8);
      width: 100%;
      max-width: 400px;
    }

    /* Header */
    .auth-header {
      text-align: center;
      margin-bottom: var(--space-8);
    }

    .auth-header h1 {
      font-size: var(--text-3xl);
      margin-bottom: var(--space-2);
      color: var(--text-primary);
    }

    .auth-header p {
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    /* Form Elements */
    .form-group {
      margin-bottom: var(--space-6);
    }

    .form-label {
      display: block;
      font-size: var(--text-sm);
      font-weight: var(--font-medium);
      color: var(--text-primary);
      margin-bottom: var(--space-2);
    }

    .form-label.required::after {
      content: " *";
      color: var(--color-danger);
    }

    .form-input {
      width: 100%;
      padding: var(--input-padding);
      border: var(--input-border);
      border-radius: var(--input-radius);
      font-size: var(--input-font-size);
      font-family: var(--font-primary);
      background-color: var(--input-bg);
      color: var(--text-primary);
      transition: var(--transition-base);
    }

    .form-input:focus {
      outline: none;
      border: var(--input-border-focus);
    }

    .form-input:disabled {
      background-color: var(--input-bg-disabled);
      color: var(--text-disabled);
      cursor: not-allowed;
    }

    /* Input States */
    .form-input.error {
      border-color: var(--color-danger);
    }

    .form-input.error:focus {
      border: 2px solid var(--color-danger);
    }

    /* Error Message */
    .error-message {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      margin-top: var(--space-2);
      padding: var(--space-3);
      background-color: rgba(211, 47, 81, 0.1);
      border: 1px solid var(--color-danger);
      border-radius: var(--radius-sm);
      color: var(--color-danger);
      font-size: var(--text-sm);
    }

    .error-message::before {
      content: "âš ";
      font-size: var(--text-lg);
    }

    /* Alert Box */
    .alert {
      padding: var(--space-4);
      border-radius: var(--radius-sm);
      margin-bottom: var(--space-6);
      font-size: var(--text-sm);
    }

    .alert.error {
      background-color: rgba(211, 47, 81, 0.1);
      border: 1px solid var(--color-danger);
      color: var(--color-danger);
    }

    .alert.success {
      background-color: rgba(135, 179, 141, 0.1);
      border: 1px solid var(--color-success);
      color: var(--color-success);
    }

    /* Button Component */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: var(--btn-padding-md);
      border-radius: var(--btn-border-radius);
      font-size: var(--text-base);
      font-weight: var(--btn-font-weight);
      font-family: var(--font-primary);
      text-align: center;
      cursor: pointer;
      transition: var(--btn-transition);
      border: none;
      text-decoration: none;
      width: 100%;
    }

    .btn-primary {
      background-color: var(--color-primary);
      color: var(--text-on-primary);
    }

    .btn-primary:hover {
      background-color: var(--color-primary-hover);
    }

    .btn-primary:active {
      background-color: var(--color-primary-active);
    }

    .btn-primary:disabled {
      background-color: var(--color-neutral-300);
      color: var(--text-disabled);
      cursor: not-allowed;
    }

    /* Utility Links */
    .form-footer {
      text-align: center;
      margin-top: var(--space-6);
      padding-top: var(--space-6);
      border-top: 1px solid var(--border-light);
    }

    .form-footer p {
      font-size: var(--text-sm);
      color: var(--text-secondary);
    }

    .form-footer a {
      color: var(--color-primary);
      font-weight: var(--font-medium);
    }

    .form-footer a:hover {
      color: var(--color-primary-hover);
      text-decoration: underline;
    }

    /* Responsive Design */
    @media (max-width: 480px) {
      .auth-card {
        padding: var(--space-6);
      }

      .auth-header h1 {
        font-size: var(--text-2xl);
      }
    }

    /* Demo States Toggle */
    .demo-toggle {
      position: fixed;
      top: var(--space-4);
      right: var(--space-4);
      background: var(--surface-card);
      padding: var(--space-3) var(--space-4);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      font-size: var(--text-sm);
      z-index: var(--z-sticky);
    }

    .demo-toggle label {
      font-weight: var(--font-medium);
      margin-right: var(--space-2);
    }

    .demo-toggle select {
      padding: var(--space-2);
      border: var(--input-border);
      border-radius: var(--radius-sm);
      font-family: var(--font-primary);
    }
  </style>
</head>
<body>
  <!-- Demo State Toggle (for prototype only) -->
  <div class="demo-toggle">
    <label for="state-selector">Demo State:</label>
    <select id="state-selector" onchange="changeState(this.value)">
      <option value="clean">Clean State</option>
      <option value="error">Error State</option>
      <option value="success">Success State</option>
    </select>
  </div>

  <!-- Main Authentication Container -->
  <div class="auth-container">
    <div class="auth-card">

      <!-- Header -->
      <header class="auth-header">
        <h1>Welcome Back</h1>
        <p>Sign in to your account</p>
      </header>

      <!-- Success Alert (hidden by default) -->
      <div id="success-alert" class="alert success" style="display: none;">
        Registration successful! You can now log in with your credentials.
      </div>

      <!-- Error Alert (hidden by default) -->
      <div id="error-alert" class="alert error" style="display: none;">
        Invalid email or password. Please try again.
      </div>

      <!-- Login Form -->
      <form id="login-form" action="/Account/Login" method="POST" novalidate>

        <!-- Email Field -->
        <div class="form-group">
          <label for="email" class="form-label required">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            class="form-input"
            placeholder="you@example.com"
            required
            autocomplete="email"
          >
          <div id="email-error" class="error-message" style="display: none;">
            Please enter a valid email address.
          </div>
        </div>

        <!-- Password Field -->
        <div class="form-group">
          <label for="password" class="form-label required">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            class="form-input"
            placeholder="Enter your password"
            required
            autocomplete="current-password"
          >
          <div id="password-error" class="error-message" style="display: none;">
            Password is required.
          </div>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary">
          Sign In
        </button>
      </form>

      <!-- Footer Links -->
      <div class="form-footer">
        <p>Don't have an account? <a href="register.html">Register here</a></p>
      </div>

    </div>
  </div>

  <!-- JavaScript for Demo State Switching -->
  <script>
    /**
     * Demo state management for prototype
     * This would be replaced with actual validation logic in production
     */

    function changeState(state) {
      // Get all elements
      const emailInput = document.getElementById('email');
      const passwordInput = document.getElementById('password');
      const emailError = document.getElementById('email-error');
      const passwordError = document.getElementById('password-error');
      const errorAlert = document.getElementById('error-alert');
      const successAlert = document.getElementById('success-alert');

      // Reset all states
      emailInput.classList.remove('error');
      passwordInput.classList.remove('error');
      emailError.style.display = 'none';
      passwordError.style.display = 'none';
      errorAlert.style.display = 'none';
      successAlert.style.display = 'none';
      emailInput.value = '';
      passwordInput.value = '';

      // Apply selected state
      switch(state) {
        case 'clean':
          // Clean state - no changes needed
          break;

        case 'error':
          // Show error state
          emailInput.value = 'invalid-email';
          passwordInput.value = 'wrongpassword';
          emailInput.classList.add('error');
          passwordInput.classList.add('error');
          emailError.style.display = 'block';
          errorAlert.style.display = 'block';
          break;

        case 'success':
          // Show success state (after registration redirect)
          successAlert.style.display = 'block';
          break;
      }
    }

    /**
     * Basic form validation (for prototype demonstration)
     * Real validation would happen server-side
     */
    document.getElementById('login-form').addEventListener('submit', function(e) {
      e.preventDefault();

      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      let hasError = false;

      // Simple validation
      if (!email || !email.includes('@')) {
        document.getElementById('email').classList.add('error');
        document.getElementById('email-error').style.display = 'block';
        hasError = true;
      } else {
        document.getElementById('email').classList.remove('error');
        document.getElementById('email-error').style.display = 'none';
      }

      if (!password) {
        document.getElementById('password').classList.add('error');
        document.getElementById('password-error').style.display = 'block';
        hasError = true;
      } else {
        document.getElementById('password').classList.remove('error');
        document.getElementById('password-error').style.display = 'none';
      }

      // If no errors, form would submit
      if (!hasError) {
        alert('Form would submit to server');
      }
    });

    // Real-time validation on blur
    document.getElementById('email').addEventListener('blur', function() {
      const email = this.value;
      if (email && !email.includes('@')) {
        this.classList.add('error');
        document.getElementById('email-error').style.display = 'block';
      } else {
        this.classList.remove('error');
        document.getElementById('email-error').style.display = 'none';
      }
    });

    document.getElementById('password').addEventListener('blur', function() {
      if (this.value === '') {
        this.classList.add('error');
        document.getElementById('password-error').style.display = 'block';
      } else {
        this.classList.remove('error');
        document.getElementById('password-error').style.display = 'none';
      }
    });
  </script>
</body>
</html>
