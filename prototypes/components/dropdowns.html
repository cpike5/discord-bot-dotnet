<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dropdown Menus - Component Prototype</title>
  <link rel="stylesheet" href="../css/tokens.css">
  <style>
    /* Demo container styles */
    .demo-container {
      padding: var(--space-8);
      max-width: 1000px;
      margin: 0 auto;
    }

    .demo-section {
      margin-bottom: var(--space-12);
    }

    .demo-section h2 {
      margin-bottom: var(--space-4);
      color: var(--text-primary);
    }

    .demo-section p {
      margin-bottom: var(--space-6);
      color: var(--text-secondary);
    }

    .examples-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--space-8);
      margin-top: var(--space-6);
    }

    .example-item {
      display: flex;
      flex-direction: column;
      gap: var(--space-3);
    }

    .example-item h3 {
      font-size: var(--text-base);
      font-weight: var(--font-semibold);
      color: var(--text-primary);
    }

    /* ============================================
       DROPDOWN COMPONENT
       ============================================ */
    /* Dropdown wrapper - provides relative positioning context */
    .dropdown {
      position: relative;
      display: inline-block;
    }

    /* ============================================
       DROPDOWN TRIGGER BUTTON
       ============================================ */
    /* Button that triggers the dropdown menu */
    .dropdown-trigger {
      padding: var(--btn-padding-md);
      border: 1px solid var(--border-medium);
      border-radius: var(--btn-border-radius);
      background-color: var(--surface-card);
      color: var(--text-primary);
      font-weight: var(--btn-font-weight);
      font-size: var(--text-sm);
      cursor: pointer;
      transition: var(--btn-transition);
      display: inline-flex;
      align-items: center;
      gap: var(--space-2);
    }

    .dropdown-trigger:hover {
      background-color: var(--color-neutral-50);
      border-color: var(--border-dark);
    }

    .dropdown-trigger:focus {
      outline: none;
      border-color: var(--border-focus);
      box-shadow: 0 0 0 3px rgba(218, 65, 103, 0.1);
    }

    /* Active state when dropdown is open */
    .dropdown.open .dropdown-trigger {
      background-color: var(--color-neutral-50);
      border-color: var(--border-dark);
    }

    /* Chevron icon that rotates when dropdown opens */
    .dropdown-trigger .chevron {
      font-size: var(--text-xs);
      transition: transform var(--transition-fast);
    }

    .dropdown.open .dropdown-trigger .chevron {
      transform: rotate(180deg);
    }

    /* Primary variant trigger button */
    .dropdown-trigger.primary {
      background-color: var(--color-primary);
      color: var(--text-on-primary);
      border-color: var(--color-primary);
    }

    .dropdown-trigger.primary:hover {
      background-color: var(--color-primary-hover);
      border-color: var(--color-primary-hover);
    }

    /* ============================================
       DROPDOWN MENU
       ============================================ */
    /* Menu overlay container - hidden by default */
    .dropdown-menu {
      position: absolute;
      top: calc(100% + var(--space-2));
      left: 0;
      min-width: 200px;
      background-color: var(--surface-card);
      border: 1px solid var(--border-light);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-lg);
      z-index: var(--z-dropdown);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-8px);
      transition: all var(--transition-fast);
      overflow: hidden;
    }

    /* Show menu when dropdown is open */
    .dropdown.open .dropdown-menu {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }

    /* Right-aligned menu variant */
    .dropdown-menu.right {
      left: auto;
      right: 0;
    }

    /* ============================================
       DROPDOWN MENU ITEMS
       ============================================ */
    /* Individual menu items */
    .dropdown-item {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      padding: var(--space-3) var(--space-4);
      color: var(--text-primary);
      font-size: var(--text-sm);
      text-decoration: none;
      cursor: pointer;
      transition: background-color var(--transition-fast);
      border: none;
      background: none;
      width: 100%;
      text-align: left;
    }

    .dropdown-item:hover {
      background-color: var(--color-neutral-50);
    }

    .dropdown-item:active {
      background-color: var(--color-neutral-100);
    }

    /* Icon within menu items */
    .dropdown-item .item-icon {
      width: var(--size-icon-sm);
      height: var(--size-icon-sm);
      color: var(--text-secondary);
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Danger variant for destructive actions */
    .dropdown-item.danger {
      color: var(--color-danger);
    }

    .dropdown-item.danger:hover {
      background-color: rgba(211, 47, 81, 0.1);
    }

    .dropdown-item.danger .item-icon {
      color: var(--color-danger);
    }

    /* Disabled state */
    .dropdown-item:disabled,
    .dropdown-item.disabled {
      color: var(--text-disabled);
      cursor: not-allowed;
      pointer-events: none;
    }

    .dropdown-item:disabled .item-icon,
    .dropdown-item.disabled .item-icon {
      color: var(--text-disabled);
    }

    /* ============================================
       DROPDOWN DIVIDER
       ============================================ */
    /* Visual separator between menu sections */
    .dropdown-divider {
      height: 1px;
      background-color: var(--border-light);
      margin: var(--space-2) 0;
    }

    /* ============================================
       DROPDOWN MENU HEADER
       ============================================ */
    /* Section header within dropdown menu */
    .dropdown-header {
      padding: var(--space-2) var(--space-4);
      font-size: var(--text-xs);
      font-weight: var(--font-semibold);
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* ============================================
       BACKDROP OVERLAY
       ============================================ */
    /* Invisible overlay to detect outside clicks */
    .dropdown-backdrop {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: calc(var(--z-dropdown) - 1);
      display: none;
    }

    .dropdown.open .dropdown-backdrop {
      display: block;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <!-- Header -->
    <div class="demo-section">
      <h1>Dropdown Menus</h1>
      <p>Dropdown menus provide a list of actions or options that appear when triggered. They support icons, dividers, disabled states, and destructive actions.</p>
    </div>

    <!-- Examples Grid -->
    <div class="demo-section">
      <h2>Dropdown Variants</h2>
      <div class="examples-grid">

        <!-- Basic Dropdown -->
        <div class="example-item">
          <h3>Basic Dropdown</h3>
          <div class="dropdown">
            <button class="dropdown-trigger">
              Options
              <span class="chevron">‚ñº</span>
            </button>
            <div class="dropdown-backdrop"></div>
            <div class="dropdown-menu">
              <button class="dropdown-item">
                <span class="item-icon">üìù</span>
                Edit
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üìã</span>
                Duplicate
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üì§</span>
                Share
              </button>
              <div class="dropdown-divider"></div>
              <button class="dropdown-item danger">
                <span class="item-icon">üóëÔ∏è</span>
                Delete
              </button>
            </div>
          </div>
        </div>

        <!-- User Account Dropdown -->
        <div class="example-item">
          <h3>User Account Menu</h3>
          <div class="dropdown">
            <button class="dropdown-trigger">
              <span class="item-icon">üë§</span>
              Account
              <span class="chevron">‚ñº</span>
            </button>
            <div class="dropdown-backdrop"></div>
            <div class="dropdown-menu right">
              <div class="dropdown-header">My Account</div>
              <button class="dropdown-item">
                <span class="item-icon">‚öôÔ∏è</span>
                Settings
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üë§</span>
                Profile
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üí≥</span>
                Billing
              </button>
              <div class="dropdown-divider"></div>
              <button class="dropdown-item">
                <span class="item-icon">üö™</span>
                Sign Out
              </button>
            </div>
          </div>
        </div>

        <!-- Primary Button Dropdown -->
        <div class="example-item">
          <h3>Primary Dropdown</h3>
          <div class="dropdown">
            <button class="dropdown-trigger primary">
              Create New
              <span class="chevron">‚ñº</span>
            </button>
            <div class="dropdown-backdrop"></div>
            <div class="dropdown-menu">
              <button class="dropdown-item">
                <span class="item-icon">üìÑ</span>
                New Document
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üìÅ</span>
                New Folder
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üîó</span>
                New Link
              </button>
            </div>
          </div>
        </div>

        <!-- Dropdown with Disabled Items -->
        <div class="example-item">
          <h3>With Disabled Items</h3>
          <div class="dropdown">
            <button class="dropdown-trigger">
              File Actions
              <span class="chevron">‚ñº</span>
            </button>
            <div class="dropdown-backdrop"></div>
            <div class="dropdown-menu">
              <button class="dropdown-item">
                <span class="item-icon">üëÅÔ∏è</span>
                View
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üìù</span>
                Edit
              </button>
              <button class="dropdown-item disabled">
                <span class="item-icon">üíæ</span>
                Save (No Changes)
              </button>
              <div class="dropdown-divider"></div>
              <button class="dropdown-item disabled">
                <span class="item-icon">‚Ü©Ô∏è</span>
                Undo (Nothing to Undo)
              </button>
            </div>
          </div>
        </div>

        <!-- Bot Commands Dropdown -->
        <div class="example-item">
          <h3>Bot Commands</h3>
          <div class="dropdown">
            <button class="dropdown-trigger">
              Commands
              <span class="chevron">‚ñº</span>
            </button>
            <div class="dropdown-backdrop"></div>
            <div class="dropdown-menu">
              <div class="dropdown-header">Moderation</div>
              <button class="dropdown-item">
                <span class="item-icon">üö´</span>
                Ban User
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üîá</span>
                Mute User
              </button>
              <div class="dropdown-divider"></div>
              <div class="dropdown-header">Utility</div>
              <button class="dropdown-item">
                <span class="item-icon">üìä</span>
                Server Stats
              </button>
              <button class="dropdown-item">
                <span class="item-icon">‚ÑπÔ∏è</span>
                Help
              </button>
            </div>
          </div>
        </div>

        <!-- Settings Dropdown -->
        <div class="example-item">
          <h3>Settings Menu</h3>
          <div class="dropdown">
            <button class="dropdown-trigger">
              <span class="item-icon">‚öôÔ∏è</span>
              Settings
              <span class="chevron">‚ñº</span>
            </button>
            <div class="dropdown-backdrop"></div>
            <div class="dropdown-menu right">
              <button class="dropdown-item">
                <span class="item-icon">üé®</span>
                Appearance
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üîî</span>
                Notifications
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üîí</span>
                Privacy
              </button>
              <button class="dropdown-item">
                <span class="item-icon">üåê</span>
                Language
              </button>
              <div class="dropdown-divider"></div>
              <button class="dropdown-item danger">
                <span class="item-icon">‚ö†Ô∏è</span>
                Reset Settings
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Implementation Notes -->
    <div class="demo-section">
      <h2>Implementation Notes</h2>
      <ul style="color: var(--text-secondary); line-height: var(--leading-relaxed);">
        <li>Click trigger button to open/close dropdown menu</li>
        <li>Click outside the dropdown to close it (backdrop overlay)</li>
        <li>Chevron icon rotates when dropdown is open</li>
        <li>Menu items support icons, hover states, and disabled states</li>
        <li>Danger variant for destructive actions (e.g., Delete)</li>
        <li>Dividers separate logical groups of actions</li>
        <li>Headers provide context for menu sections</li>
        <li>Menu can be left-aligned (default) or right-aligned</li>
      </ul>
    </div>
  </div>

  <script>
    /**
     * Initialize all dropdown components
     */
    document.addEventListener('DOMContentLoaded', () => {
      const dropdowns = document.querySelectorAll('.dropdown');

      dropdowns.forEach(dropdown => {
        const trigger = dropdown.querySelector('.dropdown-trigger');
        const backdrop = dropdown.querySelector('.dropdown-backdrop');
        const items = dropdown.querySelectorAll('.dropdown-item:not(.disabled)');

        // Toggle dropdown on trigger click
        trigger.addEventListener('click', (e) => {
          e.stopPropagation();
          toggleDropdown(dropdown);
        });

        // Close dropdown when backdrop is clicked
        if (backdrop) {
          backdrop.addEventListener('click', () => {
            closeDropdown(dropdown);
          });
        }

        // Close dropdown when an item is clicked
        items.forEach(item => {
          item.addEventListener('click', (e) => {
            e.stopPropagation();
            console.log('Clicked:', item.textContent.trim());
            closeDropdown(dropdown);
          });
        });

        // Close dropdown on Escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && dropdown.classList.contains('open')) {
            closeDropdown(dropdown);
            trigger.focus();
          }
        });
      });
    });

    /**
     * Toggle dropdown open/closed state
     * @param {HTMLElement} dropdown - The dropdown element
     */
    function toggleDropdown(dropdown) {
      const isOpen = dropdown.classList.contains('open');

      // Close all other dropdowns first
      closeAllDropdowns();

      if (!isOpen) {
        dropdown.classList.add('open');
      }
    }

    /**
     * Close a specific dropdown
     * @param {HTMLElement} dropdown - The dropdown element to close
     */
    function closeDropdown(dropdown) {
      dropdown.classList.remove('open');
    }

    /**
     * Close all open dropdowns
     */
    function closeAllDropdowns() {
      document.querySelectorAll('.dropdown.open').forEach(dropdown => {
        dropdown.classList.remove('open');
      });
    }
  </script>
</body>
</html>
